{"ast":null,"code":"import { ShareDialogComponent } from '../share-dialog/share-dialog.component';\nimport { FormControl } from '@angular/forms';\nimport { map, startWith } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./shopping-list.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/list\";\nimport * as i10 from \"@angular/material/table\";\nimport * as i11 from \"@angular/material/toolbar\";\nimport * as i12 from \"@angular/material/tooltip\";\nimport * as i13 from \"@angular/material/icon\";\nimport * as i14 from \"@angular/material/autocomplete\";\nimport * as i15 from \"@angular/material/core\";\nimport * as i16 from \"@angular/material/menu\";\nimport * as i17 from \"@angular/material/badge\";\nconst _c0 = [\"pendingTable\"];\nconst _c1 = [\"cartTable\"];\nfunction ItemsComponent_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 33)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"sync_problem\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ItemsComponent_th_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵtext(1, \" No\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_td_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"td\", 35);\n  }\n}\nfunction ItemsComponent_mat_option_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r33 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r33);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r33, \" \");\n  }\n}\nfunction ItemsComponent_th_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵtext(1, \" itemInput\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_td_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 37)(1, \"mat-form-field\")(2, \"mat-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 38);\n    i0.ɵɵlistener(\"keydown.enter\", function ItemsComponent_td_43_Template_input_keydown_enter_4_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.add());\n    })(\"ngModelChange\", function ItemsComponent_td_43_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r37.newItem = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    const _r5 = i0.ɵɵreference(38);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r8.inputPlaceHolder);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r8.newItem)(\"formControl\", ctx_r8.itemInputControl)(\"matAutocomplete\", _r5);\n  }\n}\nfunction ItemsComponent_th_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵtext(1, \" Add\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_td_46_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 35)(1, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function ItemsComponent_td_46_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r39.add());\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"add\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", ctx_r10.pendingItems.length);\n  }\n}\nfunction ItemsComponent_tr_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 40);\n  }\n}\nfunction ItemsComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \"You are yet to add an item.\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_div_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Congratulations!. You have picked all \", ctx_r13.cartedItems.length, \" items\\n\");\n  }\n}\nfunction ItemsComponent_th_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵtext(1, \" Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_td_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r42 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r42, \" \");\n  }\n}\nfunction ItemsComponent_th_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵtext(1, \" Picked\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_td_57_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r45 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 35)(1, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function ItemsComponent_td_57_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r45);\n      const item_r43 = restoredCtx.$implicit;\n      const ctx_r44 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r44.cart(item_r43));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"add_shopping_cart\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ItemsComponent_th_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵtext(1, \" Remove\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_td_60_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 35)(1, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function ItemsComponent_td_60_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r48);\n      const item_r46 = restoredCtx.$implicit;\n      const ctx_r47 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r47.remove(item_r46));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"delete\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ItemsComponent_tr_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 40);\n  }\n}\nfunction ItemsComponent_div_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41)(1, \"h3\", 45)(2, \"mat-icon\", 46);\n    i0.ɵɵtext(3, \"add_shopping_cart \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" (Carted items) \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", ctx_r22.cartedItems.length);\n  }\n}\nfunction ItemsComponent_th_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵtext(1, \" Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_td_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r50 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r50, \" \");\n  }\n}\nfunction ItemsComponent_th_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵtext(1, \" Not in\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ItemsComponent_td_70_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r53 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 35)(1, \"button\", 47);\n    i0.ɵɵlistener(\"click\", function ItemsComponent_td_70_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r53);\n      const item_r51 = restoredCtx.$implicit;\n      const ctx_r52 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r52.pending(item_r51));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"undo\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ItemsComponent_th_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 34);\n  }\n}\nfunction ItemsComponent_td_73_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"td\", 35);\n  }\n}\nfunction ItemsComponent_tr_74_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 40);\n  }\n}\nfunction ItemsComponent_span_76_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r31 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Last updated on \", ctx_r31.lastUpdated.toLocaleString(), \"\");\n  }\n}\nconst _c2 = () => [1];\nconst _c3 = () => [\"itemInput\", \"add\"];\nconst _c4 = () => [\"item\", \"gotIt\", \"remove\"];\nconst _c5 = () => [\"cartItem\", \"filler\", \"undo\"];\n// import {NgNavigatorShareService} from 'ng-navigator-share';\nexport let ItemsComponent = /*#__PURE__*/(() => {\n  class ItemsComponent {\n    constructor(shoppingListService, route, router, dialog /*, private ngNavigatorShareService: NgNavigatorShareService*/) {\n      this.shoppingListService = shoppingListService;\n      this.route = route;\n      this.router = router;\n      this.dialog = dialog;\n      this.serverUrl = '?id=';\n      this.itemsMasterList = [];\n      this.itemInputControl = new FormControl();\n      this.itemCategories = {};\n      this.categoryOrder = {\n        other: 0\n      };\n      this.pendingItems = [];\n      this.categorizedPendingItems = [];\n      this.cartedItems = [];\n      this.categorizedCartedItems = [];\n      this.syncSuccess = true;\n      this.pendingForPush = [];\n      this.lastUpdated = new Date(0);\n      this.newItem = '';\n      this.setDefaultPlaceholder();\n    }\n    ngOnInit() {\n      this.thisLoadItemsAndCategories();\n      this.route.queryParams.subscribe(params => {\n        this.id = params.id;\n      });\n      if (this.isValidId()) {\n        console.log('loading data of list id : ' + this.id);\n        this.shoppingListService.fetchLatestList(this.id).subscribe(data => {\n          console.log('shopping list from server : ' + JSON.stringify(data));\n          this.refreshUiWithLatestDataFromServer(data);\n          this.enabledReload();\n        });\n      } else {\n        this.shoppingListService.fetchLatestList(undefined).subscribe(data => {\n          console.log('created a shopping list : ' + JSON.stringify(data));\n          window.location.href = `${this.serverUrl}${data.id}`;\n        });\n      }\n    }\n    add() {\n      if (this.newItem.trim() === '') {\n        this.inputPlaceHolder = 'Please enter a valid item';\n        return;\n      } else if (this.pendingItems.indexOf(this.newItem) > -1) {\n        this.inputPlaceHolder = `You already have '${this.newItem}' in list`;\n        this.newItem = '';\n        return;\n      } else if (this.cartedItems.indexOf(this.newItem) > -1) {\n        this.inputPlaceHolder = `You already picked '${this.newItem}'`;\n        this.newItem = '';\n        return;\n      }\n      this.newItem = this.capitalizeFirstLetter(this.newItem);\n      this.pendingItems.push(this.newItem);\n      this.arrangePending();\n      this.pushData('ADD', this.newItem);\n      this.resetInput();\n      this.lastUpdated = new Date();\n    }\n    cart(item) {\n      const index = this.pendingItems.indexOf(item);\n      this.pendingItems.splice(index, 1);\n      this.cartedItems.push(item);\n      this.arrangePending();\n      this.arrangeCart();\n      this.pushData('PICKED', item);\n      this.lastUpdated = new Date();\n    }\n    pending(item) {\n      const index = this.cartedItems.indexOf(item);\n      this.cartedItems.splice(index, 1);\n      this.pendingItems.push(item);\n      this.arrangePending();\n      this.arrangeCart();\n      this.pushData('DROPPED', item);\n      this.lastUpdated = new Date();\n    }\n    remove(item) {\n      const index = this.pendingItems.indexOf(item);\n      this.pendingItems.splice(index, 1);\n      this.itemsMasterList.push(item);\n      this.sortByLength(this.itemsMasterList);\n      this.arrangePending();\n      this.pushData('REMOVE', item);\n      this.lastUpdated = new Date();\n    }\n    doneShopping() {\n      alert('Thank you for using  Shared list. See you again');\n      // TODO revisit\n      window.location.href = this.serverUrl;\n    }\n    ngOnDestroy() {\n      if (this.interval) {\n        clearInterval(this.interval);\n      }\n    }\n    shareDialog() {\n      this.dialog.open(ShareDialogComponent, {\n        data: {\n          shareUrl: this.serverUrl + this.id,\n          appUrl: this.serverUrl + '/welcome.html'\n        }\n      });\n    }\n    // TODO retain the order of items in categorized list\n    mailTo() {\n      location.href = 'mailto:hr@stavir.com?subject=Shared List';\n    }\n    about() {\n      location.href = 'https://stavir.com/tools/sharedlist/about.html';\n    }\n    help() {\n      location.href = 'https://youtu.be/8lfitdnMaEs';\n    }\n    policy() {\n      location.href = 'https://stavir.com/tools/sharedlist/privacypolicy.html';\n    }\n    share() {\n      // try {\n      //   this.ngNavigatorShareService.share({\n      //     title: 'Shared List',\n      //     text: 'Here is our shopping list. Manage items or use it for shopping.',\n      //     url: `${this.serverUrl}${this.id}`\n      //   }).then((val) => console.log('success'), (err) => {\n      //     console.log('error');\n      //   });\n      // } catch (error) {\n      //   console.log('You shopping list is not shared, reason: ', error);\n      //   this.shareDialog();\n      // }\n    }\n    story() {\n      location.href = 'https://stavir.com/tools/sharedlist/story.html';\n    }\n    isValidId() {\n      return this.id && this.id != undefined && this.id != 'undefined';\n    }\n    capitalizeFirstLetter(item) {\n      return this.newItem.charAt(0).toUpperCase() + this.newItem.slice(1);\n    }\n    thisLoadItemsAndCategories() {\n      this.shoppingListService.getCategorizedItems().subscribe(categoryItems => {\n        categoryItems.forEach(itemList => {\n          itemList.items.forEach(item => {\n            const itemInLowerCase = item.toLowerCase();\n            this.itemsMasterList.push(item);\n            this.itemCategories[itemInLowerCase] = itemList.category;\n          });\n          this.sortByLength(this.itemsMasterList);\n          this.categoryOrder[itemList.category] = itemList.order;\n        });\n        this.setUpAutocompleteFilter();\n        this.arrangePending();\n        this.arrangeCart();\n      });\n    }\n    sortByLength(list) {\n      list.sort((a, b) => a.length > b.length ? 1 : -1);\n    }\n    setUpAutocompleteFilter() {\n      this.filteredItems = this.itemInputControl.valueChanges.pipe(startWith(''), map(value => this._filter(value)));\n    }\n    _filter(value) {\n      const filterValue = value.toLowerCase();\n      return this.itemsMasterList.filter(option => filterValue.length > 1 && option.toLowerCase().includes(filterValue));\n    }\n    enabledReload() {\n      this.interval = setInterval(() => {\n        this.doPendingPushToServer();\n        this.pullDataFromServer();\n      }, 10000);\n    }\n    doPendingPushToServer() {\n      if (this.isPushPending()) {\n        console.log('do pending push');\n        this.pushChain(this.pendingForPush[0]);\n      }\n    }\n    isPushPending() {\n      return this.pendingForPush.length > 0;\n    }\n    pullDataFromServer() {\n      if (this.isPushPending()) {\n        console.log('skipping reload since push is pending progress');\n        return;\n      }\n      console.log('pull data from server');\n      this.shoppingListService.fetchLatestList(this.id).subscribe(data => {\n        this.refreshUiWithLatestDataFromServer(data);\n        this.syncSuccess = true;\n      }, error => {\n        this.syncSuccess = false;\n      });\n    }\n    pushData(action, item) {\n      this.pendingForPush.push({\n        action,\n        item\n      });\n      if (this.pendingForPush.length == 1) {\n        // wait for the existing sync to complete\n        this.pushChain(this.pendingForPush[0]);\n      }\n    }\n    //Order of the actions is important\n    pushChain(actionAndItem) {\n      console.log(`pushing  action:${JSON.stringify(actionAndItem)} to server`);\n      this.shoppingListService.updateData(this.id, actionAndItem.action, actionAndItem.item).subscribe(data => {\n        this.pendingForPush.shift();\n        if (this.isPushPending()) {\n          console.log('continue push next action');\n          this.pushChain(this.pendingForPush[0]);\n        } else {\n          console.log('No more actions pending. push done');\n          this.syncSuccess = true;\n        }\n      }, error => {\n        console.log('push failed. stopping push', error);\n        this.syncSuccess = false;\n      });\n    }\n    refreshUiWithLatestDataFromServer(data) {\n      if (data) {\n        this.id = data.id;\n        this.pendingItems = data.pending;\n        data.pending.forEach(item => this.removeItemFromMasterList(item));\n        this.arrangePending();\n        this.cartedItems = data.cart;\n        data.cart.forEach(item => this.removeItemFromMasterList(item));\n        this.arrangeCart();\n        if (this.lastUpdated.getUTCMilliseconds() < data.lastUpdated) {\n          this.lastUpdated = new Date(data.lastUpdated);\n        }\n      }\n    }\n    removeItemFromMasterList(item) {\n      const index = this.itemsMasterList.indexOf(item);\n      this.itemsMasterList.splice(index, 1);\n    }\n    resetInput() {\n      this.newItem = '';\n      this.setDefaultPlaceholder();\n      this.itemInputControl.setValue('');\n    }\n    setDefaultPlaceholder() {\n      this.inputPlaceHolder = 'Enter an Item';\n    }\n    reloadItemsFromCategorizedItems(categorizedItems) {\n      const arrangedItems = [];\n      categorizedItems.forEach(items => {\n        items.sort();\n        items.forEach(item => arrangedItems.push(item));\n      });\n      return arrangedItems;\n    }\n    addAllItemsToCategorizedList(items) {\n      const categorizedList = [];\n      items.forEach(item => {\n        const order = this.categoryOrder[this.getItemCategory(item)];\n        if (!categorizedList[order]) {\n          categorizedList[order] = [];\n        }\n        categorizedList[order].push(item);\n      });\n      return categorizedList;\n    }\n    getItemCategory(item) {\n      let category = this.itemCategories[item.toLowerCase()];\n      if (!category) {\n        category = 'other';\n      }\n      return category;\n    }\n    arrangePending() {\n      this.categorizedPendingItems = this.addAllItemsToCategorizedList(this.pendingItems);\n      this.pendingItems = this.reloadItemsFromCategorizedItems(this.categorizedPendingItems);\n      this.pendingTable.renderRows();\n    }\n    arrangeCart() {\n      this.categorizedCartedItems = this.addAllItemsToCategorizedList(this.cartedItems);\n      this.cartedItems = this.reloadItemsFromCategorizedItems(this.categorizedCartedItems);\n      this.cartTable.renderRows();\n    }\n    static #_ = this.ɵfac = function ItemsComponent_Factory(t) {\n      return new (t || ItemsComponent)(i0.ɵɵdirectiveInject(i1.ShoppingListService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatDialog));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ItemsComponent,\n      selectors: [[\"app-items\"]],\n      viewQuery: function ItemsComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n          i0.ɵɵviewQuery(_c1, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pendingTable = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.cartTable = _t.first);\n        }\n      },\n      decls: 81,\n      vars: 19,\n      consts: [[\"color\", \"primary\"], [1, \"toolbar-spacer\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Data save failed. Check your internet connection\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", 3, \"click\"], [\"mat-icon-button\", \"\", 3, \"matMenuTriggerFor\"], [\"settings\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"inputTable\", \"matTable\"], [\"matColumnDef\", \"no\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [3, \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matColumnDef\", \"itemInput\"], [\"class\", \"mat-body-2\", \"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"add\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"class\", \"mat-body-2\", 4, \"ngIf\"], [\"align\", \"center\", \"class\", \"mat-body-2\", 4, \"ngIf\"], [\"pendingTable\", \"matTable\"], [\"matColumnDef\", \"item\"], [\"matColumnDef\", \"gotIt\"], [\"matColumnDef\", \"remove\"], [\"cartTable\", \"matTable\"], [\"matColumnDef\", \"cartItem\"], [\"matColumnDef\", \"undo\"], [\"matColumnDef\", \"filler\"], [1, \"lastUpdated\"], [4, \"ngIf\"], [1, \"done\"], [\"matTooltip\", \"Clear the list and create new\", 3, \"click\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Data save failed. Check your internet connection\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [3, \"value\"], [\"mat-cell\", \"\", 1, \"mat-body-2\"], [\"matInput\", \"\", \"name\", \"newItemInput\", 3, \"ngModel\", \"formControl\", \"matAutocomplete\", \"keydown.enter\", \"ngModelChange\"], [\"matBadgeColor\", \"warn\", \"matTooltip\", \"Add an item to list\", 3, \"matBadge\", \"click\"], [\"mat-row\", \"\"], [1, \"mat-body-2\"], [\"align\", \"center\", 1, \"mat-body-2\"], [\"matTooltip\", \"Add item to cart\", 3, \"click\"], [\"matTooltip\", \"Delete item\", 3, \"click\"], [\"matSubheader\", \"\", 2, \"margin-top\", \"1em\"], [\"matBadgeColor\", \"primary\", 2, \"vertical-align\", \"middle\", \"margin-left\", \"1em\", \"margin-right\", \"0.5em\", 3, \"matBadge\"], [\"matTooltip\", \"move out of cart\", 3, \"click\"]],\n      template: function ItemsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"mat-toolbar\", 0)(1, \"span\");\n          i0.ɵɵtext(2, \"Shared List\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(3, \"span\", 1);\n          i0.ɵɵtemplate(4, ItemsComponent_button_4_Template, 3, 0, \"button\", 2);\n          i0.ɵɵelementStart(5, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_5_listener() {\n            return ctx.share();\n          });\n          i0.ɵɵelementStart(6, \"mat-icon\");\n          i0.ɵɵtext(7, \"share\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_8_listener() {\n            return ctx.help();\n          });\n          i0.ɵɵelementStart(9, \"mat-icon\");\n          i0.ɵɵtext(10, \"help\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"button\", 4)(12, \"mat-icon\");\n          i0.ɵɵtext(13, \"settings\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"mat-menu\", null, 5)(16, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_16_listener() {\n            return ctx.story();\n          });\n          i0.ɵɵelementStart(17, \"mat-icon\");\n          i0.ɵɵtext(18, \"book\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(19, \" Story \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_20_listener() {\n            return ctx.about();\n          });\n          i0.ɵɵelementStart(21, \"mat-icon\");\n          i0.ɵɵtext(22, \"group\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(23, \" About \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_24_listener() {\n            return ctx.mailTo();\n          });\n          i0.ɵɵelementStart(25, \"mat-icon\");\n          i0.ɵɵtext(26, \"phone\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(27, \" Contact us \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_28_listener() {\n            return ctx.policy();\n          });\n          i0.ɵɵelementStart(29, \"mat-icon\");\n          i0.ɵɵtext(30, \"phone\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(31, \" Privacy Policy \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(32, \"table\", 7, 8);\n          i0.ɵɵelementContainerStart(34, 9);\n          i0.ɵɵtemplate(35, ItemsComponent_th_35_Template, 2, 0, \"th\", 10)(36, ItemsComponent_td_36_Template, 1, 0, \"td\", 11);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementStart(37, \"mat-autocomplete\", 12, 13);\n          i0.ɵɵlistener(\"optionSelected\", function ItemsComponent_Template_mat_autocomplete_optionSelected_37_listener() {\n            return ctx.add();\n          });\n          i0.ɵɵtemplate(39, ItemsComponent_mat_option_39_Template, 2, 2, \"mat-option\", 14);\n          i0.ɵɵpipe(40, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementContainerStart(41, 15);\n          i0.ɵɵtemplate(42, ItemsComponent_th_42_Template, 2, 0, \"th\", 10)(43, ItemsComponent_td_43_Template, 5, 4, \"td\", 16);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(44, 17);\n          i0.ɵɵtemplate(45, ItemsComponent_th_45_Template, 2, 0, \"th\", 10)(46, ItemsComponent_td_46_Template, 4, 1, \"td\", 11);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵtemplate(47, ItemsComponent_tr_47_Template, 1, 0, \"tr\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(48, ItemsComponent_div_48_Template, 2, 0, \"div\", 19)(49, ItemsComponent_div_49_Template, 2, 1, \"div\", 20);\n          i0.ɵɵelementStart(50, \"table\", 7, 21);\n          i0.ɵɵelementContainerStart(52, 22);\n          i0.ɵɵtemplate(53, ItemsComponent_th_53_Template, 2, 0, \"th\", 10)(54, ItemsComponent_td_54_Template, 2, 1, \"td\", 16);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(55, 23);\n          i0.ɵɵtemplate(56, ItemsComponent_th_56_Template, 2, 0, \"th\", 10)(57, ItemsComponent_td_57_Template, 4, 0, \"td\", 11);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(58, 24);\n          i0.ɵɵtemplate(59, ItemsComponent_th_59_Template, 2, 0, \"th\", 10)(60, ItemsComponent_td_60_Template, 4, 0, \"td\", 11);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵtemplate(61, ItemsComponent_tr_61_Template, 1, 0, \"tr\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(62, ItemsComponent_div_62_Template, 5, 1, \"div\", 19);\n          i0.ɵɵelementStart(63, \"table\", 7, 25);\n          i0.ɵɵelementContainerStart(65, 26);\n          i0.ɵɵtemplate(66, ItemsComponent_th_66_Template, 2, 0, \"th\", 10)(67, ItemsComponent_td_67_Template, 2, 1, \"td\", 16);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(68, 27);\n          i0.ɵɵtemplate(69, ItemsComponent_th_69_Template, 2, 0, \"th\", 10)(70, ItemsComponent_td_70_Template, 4, 0, \"td\", 11);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(71, 28);\n          i0.ɵɵtemplate(72, ItemsComponent_th_72_Template, 1, 0, \"th\", 10)(73, ItemsComponent_td_73_Template, 1, 0, \"td\", 11);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵtemplate(74, ItemsComponent_tr_74_Template, 1, 0, \"tr\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(75, \"div\", 29);\n          i0.ɵɵtemplate(76, ItemsComponent_span_76_Template, 2, 1, \"span\", 30);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(77, \"div\", 31)(78, \"button\", 32);\n          i0.ɵɵlistener(\"click\", function ItemsComponent_Template_button_click_78_listener() {\n            return ctx.doneShopping();\n          });\n          i0.ɵɵelementStart(79, \"mat-icon\");\n          i0.ɵɵtext(80, \"done\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(15);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", !ctx.syncSuccess);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"matMenuTriggerFor\", _r1);\n          i0.ɵɵadvance(21);\n          i0.ɵɵproperty(\"dataSource\", i0.ɵɵpureFunction0(15, _c2));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(40, 13, ctx.filteredItems));\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"matRowDefColumns\", i0.ɵɵpureFunction0(16, _c3));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.pendingItems.length === 0 && ctx.cartedItems.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.pendingItems.length === 0 && ctx.cartedItems.length != 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"dataSource\", ctx.pendingItems);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"matRowDefColumns\", i0.ɵɵpureFunction0(17, _c4));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.pendingItems.length != 0 || ctx.cartedItems.length != 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"dataSource\", ctx.cartedItems);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"matRowDefColumns\", i0.ɵɵpureFunction0(18, _c5));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.lastUpdated);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i6.MatFormField, i6.MatLabel, i7.MatInput, i8.MatIconButton, i9.MatListSubheaderCssMatStyler, i10.MatTable, i10.MatHeaderCellDef, i10.MatColumnDef, i10.MatCellDef, i10.MatRowDef, i10.MatHeaderCell, i10.MatCell, i10.MatRow, i11.MatToolbar, i12.MatTooltip, i13.MatIcon, i14.MatAutocomplete, i15.MatOption, i14.MatAutocompleteTrigger, i5.FormControlDirective, i16.MatMenu, i16.MatMenuItem, i16.MatMenuTrigger, i17.MatBadge, i4.AsyncPipe],\n      styles: [\"mat-form-field[_ngcontent-%COMP%]{width:96%}table[_ngcontent-%COMP%]{width:100%}.mat-column-no[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}.mat-column-item[_ngcontent-%COMP%], .mat-column-cartItem[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 55%!important;width:55%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-gotIt[_ngcontent-%COMP%], .mat-column-remove[_ngcontent-%COMP%], .mat-column-undo[_ngcontent-%COMP%], .mat-column-filler[_ngcontent-%COMP%], .mat-column-carted[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}.mat-column-itemInput[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 70%!important;width:70%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-add[_ngcontent-%COMP%]{flex:0 0 15%!important;width:15%!important}mat-divider[_ngcontent-%COMP%]{margin-bottom:5px}.mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.info[_ngcontent-%COMP%]{color:orange;font-size:small}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.lastUpdated[_ngcontent-%COMP%]{text-align:center;margin-top:1em;font-size:50%}.done[_ngcontent-%COMP%]{text-align:center;margin-top:1em}\"]\n    });\n  }\n  return ItemsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}